<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Glass Messenger | Ultra Pro Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@100;300;400;700;900&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --tg-blue: #24A1DE;
            --tg-dark-bg: #17212b;
            --tg-dark-chat: #0e1621;
        }

        body {
            font-family: 'Vazirmatn', sans-serif;
            background-color: #000;
            color: white;
            margin: 0;
            height: 100vh;
            overflow: hidden;
        }

        /* Liquid Glass Background */
        .liquid-bg {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: linear-gradient(45deg, #0f172a, #1e1b4b, #312e81);
            z-index: -1;
        }

        .blob {
            position: absolute;
            width: 500px;
            height: 500px;
            background: linear-gradient(135deg, rgba(36, 161, 222, 0.4), rgba(139, 92, 246, 0.4));
            border-radius: 50%;
            filter: blur(80px);
            animation: move 20s infinite alternate;
        }

        @keyframes move {
            from { transform: translate(-10%, -10%) scale(1); }
            to { transform: translate(20%, 20%) scale(1.2); }
        }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 5px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 10px; }

        .glass-effect {
            background: var(--glass-bg);
            backdrop-filter: blur(25px) saturate(180%);
            -webkit-backdrop-filter: blur(25px) saturate(180%);
            border: 1px solid var(--glass-border);
        }

        .chat-bubble-me {
            background: linear-gradient(135deg, #2b5278, #1e3a5f);
            border-radius: 18px 18px 4px 18px;
        }

        .chat-bubble-them {
            background: rgba(30, 30, 30, 0.8);
            border-radius: 18px 18px 18px 4px;
        }

        .liquid-input {
            background: rgba(255, 255, 255, 0.07);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .liquid-input:focus {
            background: rgba(255, 255, 255, 0.12);
            border-color: var(--tg-blue);
            box-shadow: 0 0 15px rgba(36, 161, 222, 0.3);
        }

        /* Custom RTL Icons fixing */
        .mirror-rtl { transform: scaleX(-1); }
    </style>
</head>
<body>
    <div id="app"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useMemo } = React;

        // --- Lucide Icon Mock for HTML ---
        const Icon = ({ name, size = 24, className = "" }) => {
            return <i className={`inline-block ${className}`} style={{ width: size, height: size }}>
                <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                    {name === 'send' && <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"/>}
                    {name === 'clip' && <path d="M21.44 11.05l-9.19 9.19a6 6 0 01-8.49-8.49l9.19-9.19a4 4 0 015.66 5.66l-9.2 9.19a2 2 0 01-2.83-2.83l8.49-8.48"/>}
                    {name === 'more' && <circle cx="12" cy="12" r="1"/><circle cx="12" cy="5" r="1"/><circle cx="12" cy="19" r="1"/>}
                    {name === 'search' && <circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/>}
                    {name === 'menu' && <line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/>}
                    {name === 'back' && <path d="M19 12H5M12 19l-7-7 7-7"/>}
                    {name === 'check' && <path d="M20 6L9 17l-5-5"/>}
                    {name === 'double-check' && <><path d="M18 6L7 17l-5-5"/><path d="M22 10l-7.5 7.5L13 16"/></>}
                    {name === 'phone' && <path d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72 12.84 12.84 0 00.7 2.81 2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45 12.84 12.84 0 002.81.7A2 2 0 0122 16.92z"/>}
                </svg>
            </i>
        };

        // --- Mock Data Generator ---
        const generateContacts = () => {
            const names = ["Ø§Ø­Ù…Ø¯ Ø±Ø¶Ø§ÛŒÛŒ", "Ø³Ø§Ø±Ø§ Ú©Ø±ÛŒÙ…ÛŒ", "Ø¹Ù„ÛŒ Ù…Ø­Ù…Ø¯ÛŒ", "Ø²Ù‡Ø±Ø§ ØªÙ‡Ø±Ø§Ù†ÛŒ", "Ù…Ù‡Ø±Ø§Ù† Ù…Ø¯ÛŒØ±ÛŒ", "Ø§Ù„Ù†Ø§Ø² Ø´Ø§Ú©Ø±Ø¯ÙˆØ³Øª", "Ø¨Ù‡Ø±Ø§Ù… Ø±Ø§Ø¯Ø§Ù†", "ØªÛŒÙ… Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ"];
            return names.map((name, i) => ({
                id: i + 1,
                name,
                avatar: `https://i.pravatar.cc/150?u=${name}`,
                online: Math.random() > 0.5,
                lastSeen: "Û±Û° Ø¯Ù‚ÛŒÙ‚Ù‡ Ù¾ÛŒØ´",
                bio: "Ø¯Ø± Ø¯Ø³ØªØ±Ø³ Ø¨Ø±Ø§ÛŒ Ú¯ÙØªÚ¯Ùˆ",
                messages: [
                    { id: 101, text: "Ø³Ù„Ø§Ù…ØŒ Ú†Ø·ÙˆØ±ÛŒØŸ", time: "10:30", sender: 'them', status: 'read' },
                    { id: 102, text: "Ù¾Ø±ÙˆÚ˜Ù‡ Ø¯Ø± Ú†Ù‡ Ø­Ø§Ù„Ù‡ØŸ", time: "10:31", sender: 'them', status: 'read' }
                ]
            }));
        };

        // --- Components ---

        const LoginScreen = ({ onLogin }) => {
            const [step, setStep] = useState(1);
            const [phone, setPhone] = useState("");
            const [code, setCode] = useState("");
            const [loading, setLoading] = useState(false);

            const handleNext = () => {
                if (phone.length < 10) return;
                setLoading(true);
                setTimeout(() => {
                    setStep(2);
                    setLoading(false);
                }, 1200);
            };

            const handleFinish = () => {
                if (code.length < 4) return;
                setLoading(true);
                setTimeout(() => onLogin(), 1000);
            };

            return (
                <div className="h-screen w-full flex items-center justify-center p-4">
                    <div className="liquid-bg">
                        <div className="blob"></div>
                        <div className="blob" style={{ top: '40%', left: '60%', animationDelay: '2s' }}></div>
                    </div>
                    
                    <div className="glass-effect w-full max-w-[420px] rounded-[40px] p-10 text-center animate__animated animate__zoomIn">
                        <div className="w-24 h-24 bg-[#24A1DE] rounded-3xl mx-auto mb-8 flex items-center justify-center shadow-2xl rotate-12">
                            <Icon name="send" size={48} className="text-white -mr-2" />
                        </div>
                        <h1 className="text-3xl font-black mb-4 tracking-tighter">GLASS</h1>
                        <p className="text-white/60 mb-8 text-sm leading-relaxed">
                            {step === 1 ? "Ø¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹ Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„ Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯ ØªØ§ Ú©Ø¯ ØªØ§ÛŒÛŒØ¯ Ø§Ø±Ø³Ø§Ù„ Ø´ÙˆØ¯." : `Ú©Ø¯ ØªØ§ÛŒÛŒØ¯ Ûµ Ø±Ù‚Ù…ÛŒ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯Ù‡ Ø¨Ù‡ Ø´Ù…Ø§Ø±Ù‡ ${phone} Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.`}
                        </p>

                        {step === 1 ? (
                            <div className="space-y-4">
                                <input 
                                    type="tel"
                                    placeholder="Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„ (09...)"
                                    className="w-full liquid-input rounded-2xl px-6 py-4 text-center text-xl outline-none"
                                    value={phone}
                                    onChange={e => setPhone(e.target.value)}
                                />
                                <button 
                                    onClick={handleNext}
                                    className="w-full bg-[#24A1DE] py-4 rounded-2xl font-bold text-lg shadow-lg hover:bg-[#208bc0] transition-all flex items-center justify-center gap-2"
                                >
                                    {loading ? "Ø¯Ø± Ø­Ø§Ù„ Ø§Ø±Ø³Ø§Ù„..." : "Ø§Ø±Ø³Ø§Ù„ Ú©Ø¯ ØªØ§ÛŒÛŒØ¯"}
                                </button>
                            </div>
                        ) : (
                            <div className="space-y-4 animate__animated animate__fadeInRight">
                                <input 
                                    type="text"
                                    placeholder="- - - - -"
                                    className="w-full liquid-input rounded-2xl px-6 py-4 text-center text-2xl tracking-[10px] outline-none"
                                    value={code}
                                    onChange={e => setCode(e.target.value)}
                                    maxLength={5}
                                />
                                <button 
                                    onClick={handleFinish}
                                    className="w-full bg-white text-black py-4 rounded-2xl font-bold text-lg shadow-lg hover:bg-gray-200 transition-all"
                                >
                                    {loading ? "ØªØ§ÛŒÛŒØ¯ Ù‡ÙˆÛŒØª..." : "ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ"}
                                </button>
                                <button onClick={() => setStep(1)} className="text-sm text-white/40 hover:text-white underline">Ø§ØµÙ„Ø§Ø­ Ø´Ù…Ø§Ø±Ù‡</button>
                            </div>
                        )}
                        <p className="mt-10 text-[10px] text-white/20 uppercase tracking-widest">Secured by Liquid Encryption v4.0</p>
                    </div>
                </div>
            );
        };

        const Messenger = () => {
            const [contacts, setContacts] = useState(generateContacts());
            const [selectedId, setSelectedId] = useState(null);
            const [search, setSearch] = useState("");
            const [message, setMessage] = useState("");
            const [showProfile, setShowProfile] = useState(false);
            const chatEndRef = useRef(null);

            const activeChat = useMemo(() => contacts.find(c => c.id === selectedId), [selectedId, contacts]);

            useEffect(() => {
                chatEndRef.current?.scrollIntoView({ behavior: "smooth" });
            }, [activeChat?.messages]);

            const handleSend = () => {
                if (!message.trim() || !selectedId) return;
                const newMsg = {
                    id: Date.now(),
                    text: message,
                    time: new Date().toLocaleTimeString('fa-IR', { hour: '2-digit', minute: '2-digit' }),
                    sender: 'me',
                    status: 'sent'
                };
                
                setContacts(prev => prev.map(c => 
                    c.id === selectedId ? { ...c, messages: [...c.messages, newMsg] } : c
                ));
                setMessage("");
                
                // Simulate reply
                setTimeout(() => {
                    const reply = {
                        id: Date.now() + 1,
                        text: "Ù¾ÛŒØ§Ù… Ø´Ù…Ø§ Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯. Ø¨Ø²ÙˆØ¯ÛŒ Ù¾Ø§Ø³Ø® Ù…ÛŒâ€ŒØ¯Ù‡Ù….",
                        time: new Date().toLocaleTimeString('fa-IR', { hour: '2-digit', minute: '2-digit' }),
                        sender: 'them',
                        status: 'read'
                    };
                    setContacts(prev => prev.map(c => 
                        c.id === selectedId ? { ...c, messages: [...c.messages, reply] } : c
                    ));
                }, 2000);
            };

            const filteredContacts = contacts.filter(c => c.name.includes(search));

            return (
                <div className="h-screen w-full flex overflow-hidden">
                    <div className="liquid-bg">
                        <div className="blob"></div>
                        <div className="blob" style={{ bottom: '0', right: '0' }}></div>
                    </div>

                    {/* Left Sidebar: Contact List */}
                    <div className={`${selectedId ? 'hidden md:flex' : 'flex'} w-full md:w-[380px] lg:w-[420px] flex-col border-l border-white/5 glass-effect z-30 transition-all`}>
                        <div className="p-6">
                            <div className="flex items-center justify-between mb-6">
                                <Icon name="menu" className="text-white/60 cursor-pointer hover:text-white" />
                                <h2 className="text-xl font-black italic">GLASS</h2>
                                <div className="w-8 h-8 rounded-full bg-gradient-to-tr from-purple-500 to-blue-500"></div>
                            </div>
                            <div className="relative">
                                <Icon name="search" size={18} className="absolute right-4 top-3.5 text-white/30" />
                                <input 
                                    className="w-full liquid-input rounded-2xl py-3 pr-12 pl-4 text-sm outline-none"
                                    placeholder="Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± Ú¯ÙØªÚ¯ÙˆÙ‡Ø§..."
                                    value={search}
                                    onChange={e => setSearch(e.target.value)}
                                />
                            </div>
                        </div>

                        <div className="flex-1 overflow-y-auto px-2 space-y-1">
                            {filteredContacts.map(c => (
                                <div 
                                    key={c.id} 
                                    onClick={() => setSelectedId(c.id)}
                                    className={`flex items-center gap-4 p-4 rounded-3xl cursor-pointer transition-all ${selectedId === c.id ? 'bg-[#24A1DE] shadow-xl' : 'hover:bg-white/5'}`}
                                >
                                    <div className="relative">
                                        <img src={c.avatar} className="w-14 h-14 rounded-2xl object-cover shadow-lg" alt={c.name} />
                                        {c.online && <div className="absolute -bottom-1 -left-1 w-4 h-4 bg-green-500 border-4 border-[#17212b] rounded-full"></div>}
                                    </div>
                                    <div className="flex-1 min-w-0">
                                        <div className="flex justify-between mb-1">
                                            <span className="font-bold truncate text-[15px]">{c.name}</span>
                                            <span className={`text-[10px] ${selectedId === c.id ? 'text-white/70' : 'text-white/30'}`}>{c.messages[c.messages.length - 1]?.time}</span>
                                        </div>
                                        <p className={`text-xs truncate ${selectedId === c.id ? 'text-white/80' : 'text-white/40'}`}>
                                            {c.messages[c.messages.length - 1]?.text}
                                        </p>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>

                    {/* Main Chat Area */}
                    <div className={`${selectedId ? 'flex' : 'hidden md:flex'} flex-1 flex-col z-20 relative transition-all`}>
                        {activeChat ? (
                            <>
                                {/* Chat Header */}
                                <div className="h-20 glass-effect flex items-center justify-between px-6 shadow-xl z-20">
                                    <div className="flex items-center gap-4">
                                        <div className="md:hidden" onClick={() => setSelectedId(null)}>
                                            <Icon name="back" className="text-white/60 mirror-rtl" />
                                        </div>
                                        <div className="cursor-pointer flex items-center gap-3" onClick={() => setShowProfile(true)}>
                                            <img src={activeChat.avatar} className="w-11 h-11 rounded-xl object-cover shadow-lg" />
                                            <div>
                                                <div className="font-black text-sm">{activeChat.name}</div>
                                                <div className="text-[10px] text-blue-400 font-bold uppercase tracking-widest">
                                                    {activeChat.online ? "Online" : activeChat.lastSeen}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div className="flex items-center gap-6 text-white/40">
                                        <Icon name="phone" size={20} className="hover:text-white cursor-pointer" />
                                        <Icon name="search" size={20} className="hover:text-white cursor-pointer" />
                                        <Icon name="more" size={20} className="hover:text-white cursor-pointer" />
                                    </div>
                                </div>

                                {/* Messages Container */}
                                <div className="flex-1 overflow-y-auto p-6 space-y-6 custom-scrollbar" style={{ backgroundImage: 'radial-gradient(circle at center, rgba(36,161,222,0.05) 0%, transparent 70%)' }}>
                                    <div className="flex justify-center">
                                        <span className="bg-black/40 backdrop-blur-md px-4 py-1 rounded-full text-[10px] text-white/50 border border-white/5">Ø§Ù…Ø±ÙˆØ²</span>
                                    </div>
                                    {activeChat.messages.map(m => (
                                        <div key={m.id} className={`flex ${m.sender === 'me' ? 'justify-end' : 'justify-start'} animate__animated ${m.sender === 'me' ? 'animate__fadeInRight' : 'animate__fadeInLeft'}`}>
                                            <div className={`p-4 max-w-[80%] md:max-w-[60%] shadow-2xl ${m.sender === 'me' ? 'chat-bubble-me' : 'chat-bubble-them'}`}>
                                                <p className="text-[15px] leading-relaxed mb-2">{m.text}</p>
                                                <div className={`flex items-center gap-1 justify-end text-[9px] ${m.sender === 'me' ? 'text-white/60' : 'text-white/30'}`}>
                                                    <span>{m.time}</span>
                                                    {m.sender === 'me' && <Icon name={m.status === 'read' ? 'double-check' : 'check'} size={14} className={m.status === 'read' ? 'text-blue-300' : ''} />}
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                    <div ref={chatEndRef} />
                                </div>

                                {/* Message Input */}
                                <div className="p-6">
                                    <div className="max-w-5xl mx-auto flex items-end gap-3">
                                        <div className="flex-1 glass-effect rounded-[30px] p-2 flex items-center">
                                            <button className="p-3 text-white/30 hover:text-white transition-colors">
                                                <Icon name="clip" size={24} />
                                            </button>
                                            <textarea 
                                                className="flex-1 bg-transparent border-none outline-none py-3 px-2 resize-none max-h-40 min-h-[48px] text-[15px]"
                                                placeholder="Ù¾ÛŒØ§Ù… Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯..."
                                                rows="1"
                                                value={message}
                                                onChange={e => setMessage(e.target.value)}
                                                onKeyDown={e => e.key === 'Enter' && !e.shiftKey && (e.preventDefault(), handleSend())}
                                            />
                                            <div className="p-3 text-white/30 cursor-pointer hover:text-yellow-400">ðŸ˜Š</div>
                                        </div>
                                        <button 
                                            onClick={handleSend}
                                            className="w-14 h-14 rounded-[22px] bg-[#24A1DE] flex items-center justify-center shadow-xl hover:scale-110 active:scale-95 transition-all shadow-blue-500/20"
                                        >
                                            {message.trim() ? <Icon name="send" size={24} className="text-white -mr-1" /> : <div className="w-2 h-2 bg-white rounded-full animate-pulse"></div>}
                                        </button>
                                    </div>
                                </div>
                            </>
                        ) : (
                            <div className="flex-1 flex flex-col items-center justify-center opacity-20">
                                <div className="w-40 h-40 bg-white/10 rounded-[50px] mb-8 flex items-center justify-center rotate-45 border border-white/10">
                                    <Icon name="send" size={60} className="-rotate-45" />
                                </div>
                                <p className="text-xl font-black uppercase tracking-[10px]">Select a Chat</p>
                            </div>
                        )}
                    </div>

                    {/* Right Side: Profile Info */}
                    {showProfile && activeChat && (
                        <div className="fixed inset-0 md:relative md:w-[350px] glass-effect z-50 animate__animated animate__fadeInRight flex flex-col">
                            <div className="p-6 border-b border-white/5 flex justify-between items-center">
                                <h3 className="font-black italic">Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…Ø®Ø§Ø·Ø¨</h3>
                                <div className="cursor-pointer p-2 hover:bg-white/5 rounded-full" onClick={() => setShowProfile(false)}>âœ•</div>
                            </div>
                            <div className="p-8 text-center">
                                <img src={activeChat.avatar} className="w-32 h-32 rounded-[40px] mx-auto mb-6 shadow-2xl object-cover ring-4 ring-blue-500/20" />
                                <h4 className="text-xl font-black mb-1">{activeChat.name}</h4>
                                <p className="text-blue-400 text-xs font-bold mb-8">{activeChat.online ? "Online" : "Offline"}</p>
                                
                                <div className="space-y-6 text-right">
                                    <div className="bg-white/5 p-4 rounded-2xl">
                                        <p className="text-[10px] text-white/30 mb-1 uppercase tracking-widest">Bio</p>
                                        <p className="text-sm font-light">{activeChat.bio}</p>
                                    </div>
                                    <div className="bg-white/5 p-4 rounded-2xl">
                                        <p className="text-[10px] text-white/30 mb-1 uppercase tracking-widest">Phone</p>
                                        <p className="text-sm font-bold tracking-widest">+98 912 345 6789</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const App = () => {
            const [isLoggedIn, setIsLoggedIn] = useState(false);
            return isLoggedIn ? <Messenger /> : <LoginScreen onLogin={() => setIsLoggedIn(true)} />;
        };

        const root = ReactDOM.createRoot(document.getElementById('app'));
        root.render(<App />);
    </script>
</body>
</html>

